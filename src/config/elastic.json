{
  "elastic": {
    "enabled": true,
    "intervalMin": 1,
    "host": "pre.webitel.com:9200",
    "keepAlive": true,
    "requestTimeout": 500000,
    "collections": [
      {
        "name": "cdr",
        "index": "cdr",
        "type": "collection",
        "fields": ["_id", "variables"],
        "_fn": "exportCollectionCdr"
      }
    ],
    "templates": [
      {
        "name": "webitel",
        "body": {
          "template" : "cdr-*",
          "order": 2,
          "mappings": {
            "collection": {
              "dynamic_templates" : [
                {
                  "string_fields" : {
                    "path_match" : "variables.*",
                    "mapping" : {
                      "type" : "string",
                      "index" : "not_analyzed"
                    }
                  }
                },
                {
                  "notanalyzed": {
                    "match":              "*",
                    "mapping": {
                      "type":        "string",
                      "index":       "not_analyzed"
                    }
                  }
                }
              ],
              "properties": {
                "Location" : {
                  "type" : "geo_point"
                },
                "Call start time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Call answer time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Call direction": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Hangup cause": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "User ID": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Destination User": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Q850 Hangup Code": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Call duration": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Queue start time": {
                  "type": "date",
                  "index": "not_analyzed"
                },
                "Queue answer time": {
                  "type": "date",
                  "index": "not_analyzed"
                },
                "Queue stop time": {
                  "type": "date",
                  "index": "not_analyzed"
                },
                "Queue Answer Delay": {
                  "type": "long",
                  "index": "not_analyzed"
                },
                "Queue call duration": {
                  "type": "long",
                  "index": "not_analyzed"
                },
                "Queue connected call duration": {
                  "type": "long",
                  "index": "not_analyzed"
                },
                "Queue Answered": {
                  "type": "boolean",
                  "index": "not_analyzed"
                },
                "Connected call duration": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Call end time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Bridge time": {
                  "type": "date",
                  "index" : "not_analyzed"
                },
                "Progress time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Agent ID": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Queue ID": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Destination number": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Call record duration": {
                  "type": "integer",
                  "index" : "not_analyzed"
                },
                "CallerID number": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Domain name": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Bridged": {
                  "type": "boolean",
                  "index" : "not_analyzed"
                },
                "Answered": {
                  "type": "boolean",
                  "index" : "not_analyzed"
                },
                "Ring Duration": {
                  "type": "long"
                },
                "Before Bridge Delay": {
                  "type": "long"
                },
                "Post Dialing Delay": {
                  "type": "long"
                },
                "CreatedOnStorage": {
                  "type": "long",
                  "store": "yes",
                  "include_in_all": false
                },
                "variables": {
                  "type": "object",
                  "properties": {
                    "start_stamp": {
                      "type": "date",
                      "format": "yyyy-MM-dd HH:mm:ss"
                    },
                    "answersec": {
                      "type": "long"
                    },
                    "billsec": {
                      "type": "long"
                    },
                    "conference_member_id": {
                      "type": "long"
                    },
                    "duration": {
                      "type": "long"
                    },
                    "flow_billsec": {
                      "type": "long"
                    },
                    "hangup_cause_q850": {
                      "type": "long"
                    },
                    "hold_accum_seconds": {
                      "type": "long"
                    },
                    "original_read_rate": {
                      "type": "long"
                    },
                    "playback_ms": {
                      "type": "long"
                    },
                    "playback_seconds": {
                      "type": "long"
                    },
                    "progress_mediasec": {
                      "type": "long"
                    },
                    "read_rate": {
                      "type": "long"
                    },
                    "record_seconds": {
                      "type": "long"
                    },
                    "sip_invite_failure_status": {
                      "type": "long"
                    },
                    "video_read_rate": {
                      "type": "long"
                    },
                    "video_write_rate": {
                      "type": "long"
                    },
                    "waitsec": {
                      "type": "long"
                    },
                    "write_rate": {
                      "type": "long"
                    }
                  }
                },
                "recordings": {
                  "type": "nested",
                  "include_in_parent": true,
                  "properties": {
                    "content-type": {
                      "type": "string"
                    },
                    "createdOn": {
                      "type": "date",
                      "format": "strict_date_optional_time||epoch_millis"
                    },
                    "domain": {
                      "type": "string",
                      "index": "not_analyzed"
                    },
                    "name": {
                      "type": "string",
                      "index": "not_analyzed"
                    },
                    "path": {
                      "type": "string",
                      "index": "not_analyzed"
                    },
                    "private": {
                      "type": "boolean"
                    },
                    "size": {
                      "type": "long"
                    },
                    "type": {
                      "type": "integer"
                    },
                    "uuid": {
                      "type": "string",
                      "index": "not_analyzed"
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}